<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="title" content="百度脑图">
    <meta name="keyword" content="脑图,kity,svg,minder,百度,fex,前端,在线">
    <meta name="description" content="百度脑图，便捷的脑图编辑工具。让您在线上直接创建、保存并分享你的思路。">


    <script src="lib/jquery-2.1.0.min.js" charset="utf-8"></script>

    <script src="kity/dist/kitygraph.all.js" charset="utf-8"></script>
    <script src="import.js" charset="utf-8"></script>
    <script src="kityminder.config.js" charset="utf-8"></script>
    <script src="lang/zh-cn/zh-cn.js" charset="utf-8"></script>
    
    <script src="lib/zip.js" charset="utf-8"></script>
    <script>
        zip.inflateJSPath = 'lib/inflate.js';
    </script>

    <script src="lib/jquery.xml2json.js" charset="utf-8"></script>
   
    <link href="themes/default/css/import.css" type="text/css" rel="stylesheet" />
    
    <link rel="stylesheet" href="pan/pan.css">
    <script src="pan/minder.third.js" charset="utf-8"></script>
</head>
<style>
</style>
<body>
    <div class="files">
        <a class="file" data-type="xmind" data-url="https://c.pcs.baidu.com/rest/2.0/pcs/file?path=%2Fapps%2Fkityminder%2F%E7%99%BE%E5%BA%A6xmind-%E7%BD%91%E7%9B%98.xmind&access_token=52.a168cdef7648c17628a0695e40771fd7.2592000.1401277148.2936331757-2246711&method=download" href="javascript:;">XMind 格式</a>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <a class="file" data-type="km" data-url="https://c.pcs.baidu.com/rest/2.0/pcs/file?path=%2Fapps%2Fkityminder%2Fkm%E6%A0%BC%E5%BC%8F-%E7%BD%91%E7%9B%98.km&access_token=52.cadcb9ad33b982654c2d0cd641b33b54.2592000.1401332814.2936331757-2246711&method=download" href="javascript:;">KM 格式</a>
    </div>

    <!--Dialog 模板-->
    <div class="km-dialog">
        <a class="close">X</a>
        <div class="loading">
            <div class="loading-progress">0%</div>
        </div>
        <div id="kity-minder"></div>
    </div>
</body>
<script>

    var $dialog = $('.km-dialog').hide(),
        $close = $dialog.find('.close')
        $loading = $dialog.find('.loading').hide(),
        $loadingProgress = $loading.find('.loading-progress');

    $close.click(function() {
        $dialog.hide();
    });

    $('.files').delegate('.file', 'click', function(){
        var url = $(this).attr('data-url');
        var type = $(this).data('type');

        $dialog.show();
        $loading.show();
        $loadingProgress.text('正在加载...');

        KityMinder.load({
            url: $(this).data('url'),
            type: $(this).data('type'),
            target: 'kity-minder',
            success: function(minder) {
                $loading.hide();
            },
            progress: function(percent) {
                $loadingProgress.text('正在加载（' + percent.toFixed(2) + '%）...')
            },
            error: function(message) {
                $loadingProgress.text('加载失败：' + message);
            }
        });
    });
</script>
</html>